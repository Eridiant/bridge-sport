!function(){"use strict";function e(e){var t=document.querySelector(".nav");e?t.classList.remove("nav-active"):t.classList.add("nav-active")}document.addEventListener("DOMContentLoaded",(function(){var t=0;n();try{window.addEventListener("scroll",(function(e){n()}),!0)}catch(e){console.log(e)}function n(){var n=window.pageYOffset;n>100&&t?e(t=0):n<=100&&!t&&e(t=1)}if(document.querySelector("#post-youtube")){var a=document.querySelector("#post-youtube"),o=a.dataset.youtube,d=function(){new Promise((function(e,t){a.innerHTML='<iframe src="https://www.youtube.com/embed/'.concat(o,'?autoplay=1" title="YouTube video player" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'),a.classList.remove("active")})).then((function(){a.removeEventListener("click",d,!1)}))};a.addEventListener("click",d,!1)}if(document.querySelector("#post-iframe")){var l=document.querySelector("#post-iframe"),i=l.dataset.iframe,s=function(){new Promise((function(e,t){l.onload=e,l.onerror=t,l.innerHTML='<iframe src="'.concat(i,'"></iframe>'),l.classList.remove("active")})).then((function(){l.removeEventListener("click",s,!1)}))};l.addEventListener("click",s,!1)}var r=document.querySelector("#bidding");if(r){var c,u=function(){var e=v(document.querySelector("#body span:last-child"));return g=e?w%2==0?!Number(e.dataset.opponent):Number(e.dataset.opponent):E},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.dataset.parent;u();var n={system_id:r.dataset.system,parent_id:t,pass_count:e,opponent:g};xhRequest(n,"/bid/fill").then((function(e){var t=JSON.parse(e).data;L.innerHTML="",y.querySelectorAll(".exist").forEach((function(e){e.classList.remove("exist"),e.removeAttribute("data-pr"),e.removeAttribute("data-opponent")})),t.forEach((function(e){var t=e.description?'<details><summary></summary><span class="details">'.concat(e.description,"</span></details>"):"";c='<div data-num="'.concat(e.num,'" data-bid="').concat(e.bid,'" data-id="').concat(e.id,'" data-opponent="').concat(e.opponent,'" class=""><span  class="excerpt">').concat(e.excerpt,"</span>").concat(t,"</div>"),L.innerHTML+=c;var n=y.querySelector('span[data-num="'.concat(e.num,'"]'));n.classList.add("exist"),n.dataset.pr=e.id,n.dataset.opponent=e.opponent}))})).catch((function(e){alert(e),console.log(e)}))},v=function(e){for(;(null===(t=e)||void 0===t||null===(n=t.previousElementSibling)||void 0===n||null===(a=n.dataset)||void 0===a||!a.num)&&null!==(null===(o=e)||void 0===o?void 0:o.previousElementSibling);){var t,n,a,o,d;e=null===(d=e)||void 0===d?void 0:d.previousElementSibling}return null===e.previousElementSibling?0:e.previousElementSibling},p=function(e){var t=document.querySelector("#dbl");e%2!=0?t.classList.remove("dbl"):t.classList.contains("dbl")||k||t.classList.add("dbl")},f=function(e){if(!(e<0)){var t=document.querySelector("style"),n="\n                .bidding-wrapper span:nth-child(-n+".concat(e,") {\n                    height: 0;\n                    opacity: 0;\n                    font-size: 0px;\n                }\n            ");t.innerHTML=n}},b=document.querySelector("#body"),y=document.querySelector("#box"),S=document.querySelector("#bidding-container"),L=document.querySelector("#bidding-values"),q=document.querySelector("#competition"),h=document.querySelector("#intervention"),E=(document.querySelector("#vulnerable"),document.querySelector("#fillout"),0),g=0,w=0,x=0,k=0;m(null),b.addEventListener("click",(function(e){var t,n,a,o,d,l,i,s,r=e.target,c=r.closest("span").previousElementSibling;null===c?x=w=0:w=c.dataset.num?0:c.dataset.count;var u=null===(t=v(r))||void 0===t||null===(n=t.dataset)||void 0===n?void 0:n.num;-1==u&&document.querySelector("#dbl").classList.add("redbl"),-2==u?(document.querySelector("#dbl").classList.add("redbl"),k=1):k=0,w%2==0&&null!==r.previousElementSibling&&(q.checked=!0),v(r)||(h.readOnly=!1,h.classList.remove("dn")),function(){var e,t,n=null==r||null===(e=r.closest("span"))||void 0===e||null===(t=e.dataset)||void 0===t?void 0:t.num,a=1;if(!n){var o,d;a=0,n=null===(o=v(r.closest("span")))||void 0===o||null===(d=o.dataset)||void 0===d?void 0:d.num}for(;n!==S.lastElementChild.dataset.num;)S.lastElementChild.remove();a&&S.lastElementChild.remove()}(),delete r.closest("span").dataset.num,delete r.closest("span").dataset.parent,delete r.closest("span").dataset.count,delete r.closest("span").dataset.opponent,p(w),f(u),function(){for(;r.closest("span")!==b.lastElementChild;)b.lastElementChild.remove();document.querySelector("#body span:last-child").innerHTML="?"}();var y=null!==(a=null===(o=v(r))||void 0===o||null===(d=o.dataset)||void 0===d?void 0:d.parent)&&void 0!==a?a:0;b.dataset.parent=y,m(w,null!==(l=null===(i=v(r))||void 0===i||null===(s=i.dataset)||void 0===s?void 0:s.parent)&&void 0!==l?l:0)})),r.addEventListener("click",(function(e){var t=e.target;t.dataset.num;if(t.closest(".bidding-form")&&t.closest("#intervention"))return h.checked?(E=1,void m(w,0)):(E=0,void m(w,0));if(t.closest("#box")&&t.dataset.num&&(t.closest(".exist")||!Number(t.dataset.num))){var n,a,o,d=function(e){var n,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;w>2&&x||w>3||(t.closest(".bidding-wrapper")&&f(t.dataset.num),s=o||document.createElement("span"),"undefined"!==(null==t||null===(n=t.dataset)||void 0===n?void 0:n.num)&&0!==Number(null==t||null===(a=t.dataset)||void 0===a?void 0:a.num)&&S.appendChild(document.querySelector('div[data-num="'.concat(t.dataset.num,'"]'))),s.innerHTML=e,"pass"!==e&&"?"!==e&&(h.readOnly=!0,h.classList.add("dn"),s.dataset.num=t.dataset.num,s.dataset.parent=t.dataset.pr,s.dataset.opponent=t.dataset.opponent),i.append(s),l(e))},l=function(e){if(t.dataset.num<1){if(0===t.dataset.num)return w++;-1==t.dataset.num&&document.querySelector("#dbl").classList.add("redbl"),-2==t.dataset.num&&(k=1)}return(t.dataset.num>1||-2==t.dataset.num)&&(document.querySelector("#dbl").classList.remove("redbl"),document.querySelector("#dbl").classList.remove("dbl")),t.dataset.num>1&&(k=0),"pass"===e?(w++,void(s.dataset.count=w)):"?"!==e?(s.dataset.count=w,w=0):void 0},i=document.querySelector("#body"),s=document.querySelector("#body span:last-child");if(d(t.dataset.bid,s),Number(t.dataset.num)&&(x=1),!q.checked&&w<1&&d("pass"),d("?",0,1),p(w),b.dataset.parent=null!==(n=null===(a=v(document.querySelector("#body span:last-child")))||void 0===a||null===(o=a.dataset)||void 0===o?void 0:o.parent)&&void 0!==n?n:0,m(w),!Number(t.dataset.num))return}}))}}))}();